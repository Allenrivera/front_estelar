<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente Estelar</title>

    <link rel="icon" type="image/png" sizes="32x32" href="/img/Logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/admin/static/dist/css/adminlte.min.css">
</head>
<body>
    <body class="hold-transition login-page">
        <div class="login-box">
          <div class="login-logo">
            <a href="/index.html"><b>EstellarBank</b></a>
          </div>
          <div class="card">
            <div class="card-body login-card-body">
              <p class="login-box-msg">Ingreso de sesion Admin Estelar</p>
        
        
              <form id="loginForm" action="" method="post">
                
                <div class="input-group mb-3">
                  <input type="email" name="correo" class="form-control" placeholder="Correo" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" title="Por favor, introduce una dirección de correo electrónico válida.">
                  <div class="input-group-append">
                    <div class="input-group-text">
                      <span class="fas fa-envelope"></span>
                    </div>
                  </div>
                </div>
        
                <div class="input-group mb-3">
                  <input type="password" name="password" class="form-control" placeholder="Password" required minlength="8" maxlength="15"  >
                  <div class="input-group-append">
                    <div class="input-group-text">
                      <span class="fas fa-lock"></span>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-4">
                    <button type="button" name="btnlogin" class="btn btn-primary btn-block">Ingresar</button>
                </div>
                </div>
              </form>
      
            </div>
        
          </div>
        </div>
</body>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">


<script>
  $(document).ready(function () {
      $("button[name='btnlogin']").click(function () {
          loginUser();
      });
  });

  function loginUser() {
      var email = $("input[name='correo']").val();
      var password = $("input[name='password']").val();

      var credentials = {
          "correo": email,
          "password": password
      };

      $.ajax({
          type: "POST",
          contentType: "application/json",
          url: "http://localhost:8080/sesion/login",
          data: JSON.stringify(credentials),
          success: function (response) {
              alert(response);
              if (response === "Inicio de sesión exitoso") {
                  console.log("Redirigiendo a la página deseada");
                  window.location.href = "principaladmin.html";
              }
          },
          error: function (error) {
              alert("Error: " + error.responseText);
          }
      });
  }
</script>

</html>